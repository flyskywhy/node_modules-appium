'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _this = this;

var _chai = require('chai');

var _chai2 = _interopRequireDefault(_chai);

var _chaiAsPromised = require('chai-as-promised');

var _chaiAsPromised2 = _interopRequireDefault(_chaiAsPromised);

var _sinon = require('sinon');

var _sinon2 = _interopRequireDefault(_sinon);

var _ = require('../../..');

var _2 = _interopRequireDefault(_);

var _libCommandsGeneral = require('../../../lib/commands/general');

var _libAndroidHelpers = require('../../../lib/android-helpers');

var _libAndroidHelpers2 = _interopRequireDefault(_libAndroidHelpers);

var _appiumTestSupport = require('appium-test-support');

var _appiumSupport = require('appium-support');

var _appiumAndroidBootstrap = require('appium-android-bootstrap');

var _appiumAndroidBootstrap2 = _interopRequireDefault(_appiumAndroidBootstrap);

var _bluebird = require('bluebird');

var _bluebird2 = _interopRequireDefault(_bluebird);

var _appiumAdb = require('appium-adb');

var _appiumAdb2 = _interopRequireDefault(_appiumAdb);

_chai2['default'].should();
_chai2['default'].use(_chaiAsPromised2['default']);

var driver = undefined;
var sandbox = _sinon2['default'].sandbox.create();
var expect = _chai2['default'].expect;

describe('General', function () {
  beforeEach(function () {
    driver = new _2['default']();
    driver.bootstrap = new _appiumAndroidBootstrap2['default']();
    driver.adb = new _appiumAdb2['default']();
    driver.caps = {};
    driver.opts = {};
  });
  afterEach(function () {
    sandbox.restore();
  });
  describe('keys', function () {
    it('should send keys via setText bootstrap command', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.bootstrap, 'sendAction');
            driver.opts.unicodeKeyboard = true;
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.keys('keys'));

          case 4:
            driver.bootstrap.sendAction.calledWithExactly('setText', { text: 'keys', replace: false, unicodeKeyboard: true }).should.be['true'];

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should join keys if keys is array', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.bootstrap, 'sendAction');
            driver.opts.unicodeKeyboard = false;
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.keys(['k', 'e', 'y', 's']));

          case 4:
            driver.bootstrap.sendAction.calledWithExactly('setText', { text: 'keys', replace: false }).should.be['true'];

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  });
  describe('getDeviceTime', function () {
    it('should return device time', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.adb, 'shell');
            driver.adb.shell.returns(' 11:12 ');
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.getDeviceTime().should.become('11:12'));

          case 4:
            driver.adb.shell.calledWithExactly(['date']).should.be['true'];

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should thorws error if shell command failed', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.adb, 'shell').throws();
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getDeviceTime().should.be.rejectedWith('Could not capture'));

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  });
  describe('getPageSource', function () {
    it('should return page source', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.bootstrap, 'sendAction').withArgs('source').returns('sources');
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getPageSource().should.be.equal('sources'));

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  });
  describe('back', function () {
    it('should press back', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.bootstrap, 'sendAction');
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.back());

          case 3:
            driver.bootstrap.sendAction.calledWithExactly('pressBack').should.be['true'];

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  });
  describe('isKeyboardShown', function () {
    it('should return true if the keyboard is shown', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.adb.isSoftKeyboardPresent = function () {
              return { isKeyboardShown: true, canCloseKeyboard: true };
            };
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.isKeyboardShown());

          case 3:
            context$3$0.sent.should.equal(true);

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should return false if the keyboard is not shown', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.adb.isSoftKeyboardPresent = function () {
              return { isKeyboardShown: false, canCloseKeyboard: true };
            };
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.isKeyboardShown());

          case 3:
            context$3$0.sent.should.equal(false);

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  });
  describe('hideKeyboard', function () {
    it('should hide keyboard via back command', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver, 'back');
            driver.adb.isSoftKeyboardPresent = function () {
              return { isKeyboardShown: true, canCloseKeyboard: true };
            };
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.hideKeyboard());

          case 4:
            driver.back.calledOnce.should.be['true'];

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should not call back command if can\'t close keyboard', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver, 'back');
            driver.adb.isSoftKeyboardPresent = function () {
              return { isKeyboardShown: true, canCloseKeyboard: false };
            };
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.hideKeyboard());

          case 4:
            driver.back.notCalled.should.be['true'];

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should throw an error if no keyboard is present', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.adb.isSoftKeyboardPresent = function () {
              return false;
            };
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.hideKeyboard().should.be.rejectedWith(/not present/));

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  });
  describe('openSettingsActivity', function () {
    it('should open settings activity', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.adb, 'getFocusedPackageAndActivity').returns({ appPackage: 'pkg', appActivity: 'act' });
            sandbox.stub(driver.adb, 'shell');
            sandbox.stub(driver.adb, 'waitForNotActivity');
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.openSettingsActivity('set1'));

          case 5:
            driver.adb.shell.calledWithExactly(['am', 'start', '-a', 'android.settings.set1']).should.be['true'];
            driver.adb.waitForNotActivity.calledWithExactly('pkg', 'act', 5000).should.be['true'];

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  });
  describe('getWindowSize', function () {
    it('should get window size', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.bootstrap, 'sendAction').withArgs('getDeviceSize').returns('size');
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getWindowSize().should.be.equal('size'));

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  });
  describe('getCurrentActivity', function () {
    it('should get current activity', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.adb, 'getFocusedPackageAndActivity').returns({ appActivity: 'act' });
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getCurrentActivity().should.eventually.be.equal('act'));

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  });
  describe('getCurrentPackage', function () {
    it('should get current activity', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.adb, 'getFocusedPackageAndActivity').returns({ appPackage: 'pkg' });
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getCurrentPackage().should.eventually.equal('pkg'));

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  });
  describe('getLogTypes', function () {
    it('should get log types', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.getLogTypes().should.be.deep.equal(['logcat']));

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  });
  describe('getLog', function () {
    it('should get log types', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.adb, 'getLogcatLogs').returns('logs');
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getLog('logcat').should.be.equal('logs'));

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should throws exception if log type is unsupported', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            expect(function () {
              return driver.getLog('unsupported_type');
            }).to['throw']('Unsupported log type unsupported_type');

          case 1:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  });
  describe('isAppInstalled', function () {
    it('should return true if app is installed', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.adb, 'isAppInstalled').withArgs('pkg').returns(true);
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.isAppInstalled('pkg').should.be['true']);

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  });
  describe('removeApp', function () {
    it('should remove app', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.adb, 'uninstallApk').withArgs('pkg').returns(true);
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.removeApp('pkg').should.be['true']);

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  });
  describe('installApp', function () {
    it('should install app', function callee$2$0() {
      var app, opts;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.opts.fastReset = 'fastReset';
            app = 'app.apk';
            opts = { app: 'app.apk', appPackage: 'pkg', fastReset: 'fastReset' };

            sandbox.stub(driver.helpers, 'configureApp').withArgs('app', '.apk').returns(app);
            sandbox.stub(_appiumSupport.fs, 'exists').withArgs(app).returns(true);
            sandbox.stub(driver.adb, 'packageAndLaunchActivityFromManifest').withArgs(app).returns({ apkPackage: 'pkg' });
            sandbox.stub(_libAndroidHelpers2['default'], 'installApkRemotely').returns(true);
            context$3$0.next = 9;
            return _regeneratorRuntime.awrap(driver.installApp('app').should.eventually.be['true']);

          case 9:
            driver.helpers.configureApp.calledOnce.should.be['true'];
            _appiumSupport.fs.exists.calledOnce.should.be['true'];
            driver.adb.packageAndLaunchActivityFromManifest.calledOnce.should.be['true'];
            _libAndroidHelpers2['default'].installApkRemotely.calledWithExactly(driver.adb, opts).should.be['true'];

          case 13:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should throw an error if APK does not exist', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.installApp('non/existent/app.apk').should.be.rejectedWith(/Could not find/));

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  });
  describe('background', function () {
    it('should bring app to background', function callee$2$0() {
      var params;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.opts = { appPackage: 'pkg', appActivity: 'acv', intentAction: 'act',
              intentCategory: 'cat', intentFlags: 'flgs',
              optionalIntentArguments: 'opt' };
            params = { pkg: 'pkg', activity: 'acv', action: 'act', category: 'cat',
              flags: 'flgs', waitPkg: 'wpkg', waitActivity: 'wacv',
              optionalIntentArguments: 'opt', stopApp: false };

            sandbox.stub(driver.adb, 'goToHome');
            sandbox.stub(driver.adb, 'getFocusedPackageAndActivity').returns({ appPackage: 'wpkg', appActivity: 'wacv' });
            sandbox.stub(_bluebird2['default'], 'delay');
            sandbox.stub(driver.adb, 'startApp');
            context$3$0.next = 8;
            return _regeneratorRuntime.awrap(driver.background(10));

          case 8:
            driver.adb.getFocusedPackageAndActivity.calledOnce.should.be['true'];
            driver.adb.goToHome.calledOnce.should.be['true'];
            _bluebird2['default'].delay.calledWithExactly(10000).should.be['true'];
            driver.adb.startApp.calledWithExactly(params).should.be['true'];

          case 12:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should not bring app back if seconds are negative', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.adb, 'goToHome');
            sandbox.stub(driver.adb, 'startApp');
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.background(-1));

          case 4:
            driver.adb.goToHome.calledOnce.should.be['true'];
            driver.adb.startApp.notCalled.should.be['true'];

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  });
  describe('getStrings', (0, _appiumTestSupport.withMocks)({ helpers: _libAndroidHelpers2['default'] }, function (mocks) {
    it('should return app strings', function callee$2$0() {
      var strings;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.bootstrap.sendAction = function () {
              return '';
            };
            mocks.helpers.expects("pushStrings").returns({ 'test': 'en_value' });
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.getStrings('en'));

          case 4:
            strings = context$3$0.sent;

            strings.test.should.equal('en_value');
            mocks.helpers.verify();

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should return cached app strings for the specified language', function callee$2$0() {
      var strings;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.adb.getDeviceLanguage = function () {
              return 'en';
            };
            driver.apkStrings.en = { 'test': 'en_value' };
            driver.apkStrings.fr = { 'test': 'fr_value' };
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.getStrings('fr'));

          case 5:
            strings = context$3$0.sent;

            strings.test.should.equal('fr_value');

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should return cached app strings for the device language', function callee$2$0() {
      var strings;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.adb.getDeviceLanguage = function () {
              return 'en';
            };
            driver.apkStrings.en = { 'test': 'en_value' };
            driver.apkStrings.fr = { 'test': 'fr_value' };
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.getStrings());

          case 5:
            strings = context$3$0.sent;

            strings.test.should.equal('en_value');

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
  describe('launchApp', function () {
    it('should init and start app', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver, 'initAUT');
            sandbox.stub(driver, 'startAUT');
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.launchApp());

          case 4:
            driver.initAUT.calledOnce.should.be['true'];
            driver.startAUT.calledOnce.should.be['true'];

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  });
  describe('startActivity', function () {
    var params = undefined;
    beforeEach(function () {
      params = { pkg: 'pkg', activity: 'act', waitPkg: 'wpkg', waitActivity: 'wact',
        action: 'act', category: 'cat', flags: 'flgs', optionalIntentArguments: 'opt' };
      sandbox.stub(driver.adb, 'startApp');
    });
    it('should start activity', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            params.optionalIntentArguments = 'opt';
            params.stopApp = false;
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.startActivity('pkg', 'act', 'wpkg', 'wact', 'act', 'cat', 'flgs', 'opt', true));

          case 4:
            driver.adb.startApp.calledWithExactly(params).should.be['true'];

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should use dontStopAppOnReset from opts if it is not passed as param', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.opts.dontStopAppOnReset = true;
            params.stopApp = false;
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.startActivity('pkg', 'act', 'wpkg', 'wact', 'act', 'cat', 'flgs', 'opt'));

          case 4:
            driver.adb.startApp.calledWithExactly(params).should.be['true'];

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should use appPackage and appActivity if appWaitPackage and appWaitActivity are undefined', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            params.waitPkg = 'pkg';
            params.waitActivity = 'act';
            params.stopApp = true;
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.startActivity('pkg', 'act', null, null, 'act', 'cat', 'flgs', 'opt', false));

          case 5:
            driver.adb.startApp.calledWithExactly(params).should.be['true'];

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  });
  describe('reset', function () {
    it('should reset app via reinstall if fullReset is true', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.opts.fullReset = true;
            driver.opts.appPackage = 'pkg';
            sandbox.stub(driver.adb, 'stopAndClear');
            sandbox.stub(driver.adb, 'uninstallApk');
            sandbox.stub(_libAndroidHelpers2['default'], 'installApkRemotely');
            sandbox.stub(driver, 'grantPermissions');
            sandbox.stub(driver, 'startAUT').returns('aut');
            context$3$0.next = 9;
            return _regeneratorRuntime.awrap(driver.reset().should.eventually.be.equal('aut'));

          case 9:
            driver.adb.stopAndClear.calledWithExactly('pkg').should.be['true'];
            driver.adb.uninstallApk.calledWithExactly('pkg').should.be['true'];
            _libAndroidHelpers2['default'].installApkRemotely.calledWithExactly(driver.adb, driver.opts).should.be['true'];
            driver.grantPermissions.calledOnce.should.be['true'];
            driver.startAUT.calledOnce.should.be['true'];

          case 14:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should do fast reset if fullReset is false', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.opts.fullReset = false;
            driver.opts.appPackage = 'pkg';
            sandbox.stub(driver.adb, 'stopAndClear');
            sandbox.stub(driver, 'grantPermissions');
            sandbox.stub(driver, 'startAUT').returns('aut');
            context$3$0.next = 7;
            return _regeneratorRuntime.awrap(driver.reset().should.eventually.be.equal('aut'));

          case 7:
            driver.adb.stopAndClear.calledWithExactly('pkg').should.be['true'];
            driver.grantPermissions.calledOnce.should.be['true'];
            driver.startAUT.calledOnce.should.be['true'];

          case 10:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  });
  describe('startAUT', function () {
    it('should start AUT', function callee$2$0() {
      var params;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.opts = { appPackage: 'pkg', appActivity: 'act', intentAction: 'actn',
              intentCategory: 'cat', intentFlags: 'flgs', appWaitPackage: 'wpkg',
              appWaitActivity: 'wact', appWaitDuration: 'wdur',
              optionalIntentArguments: 'opt' };
            params = { pkg: 'pkg', activity: 'act', action: 'actn', category: 'cat',
              flags: 'flgs', waitPkg: 'wpkg', waitActivity: 'wact',
              waitDuration: 'wdur', optionalIntentArguments: 'opt', stopApp: false };

            driver.opts.dontStopAppOnReset = true;
            params.stopApp = false;
            sandbox.stub(driver.adb, 'startApp');
            context$3$0.next = 7;
            return _regeneratorRuntime.awrap(driver.startAUT());

          case 7:
            driver.adb.startApp.calledWithExactly(params).should.be['true'];

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  });
  describe('setUrl', function () {
    it('should set url', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.opts = { appPackage: 'pkg' };
            sandbox.stub(driver.adb, 'startUri');
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.setUrl('url'));

          case 4:
            driver.adb.startUri.calledWithExactly('url', 'pkg').should.be['true'];

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  });
  describe('closeApp', function () {
    it('should close app', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.opts = { appPackage: 'pkg' };
            sandbox.stub(driver.adb, 'forceStop');
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.closeApp());

          case 4:
            driver.adb.forceStop.calledWithExactly('pkg').should.be['true'];

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  });
  describe('getDisplayDensity', function () {
    it('should return the display density of a device', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.adb.shell = function () {
              return '123';
            };
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getDisplayDensity());

          case 3:
            context$3$0.sent.should.equal(123);

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should return the display density of an emulator', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.adb.shell = function (cmd) {
              var joinedCmd = cmd.join(' ');
              if (joinedCmd.indexOf('ro.sf') !== -1) {
                // device property look up
                return '';
              } else if (joinedCmd.indexOf('qemu.sf') !== -1) {
                // emulator property look up
                return '456';
              }
              return '';
            };
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getDisplayDensity());

          case 3:
            context$3$0.sent.should.equal(456);

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should throw an error if the display density property can\'t be found', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.adb.shell = function () {
              return '';
            };
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getDisplayDensity().should.be.rejectedWith(/Failed to get display density property/));

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should throw and error if the display density is not a number', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.adb.shell = function () {
              return 'abc';
            };
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getDisplayDensity().should.be.rejectedWith(/Failed to get display density property/));

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  });
  describe('parseSurfaceLine', function () {
    it('should return visible true if the surface is visible', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            (0, _libCommandsGeneral.parseSurfaceLine)('shown=true rect=1 1 1 1').should.be.eql({
              visible: true,
              x: 1,
              y: 1,
              width: 1,
              height: 1
            });

          case 1:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should return visible false if the surface is not visible', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            (0, _libCommandsGeneral.parseSurfaceLine)('shown=false rect=1 1 1 1').should.be.eql({
              visible: false,
              x: 1,
              y: 1,
              width: 1,
              height: 1
            });

          case 1:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should return the parsed surface bounds', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            (0, _libCommandsGeneral.parseSurfaceLine)('shown=true rect=(1.0,2.0) 3.0 x 4.0').should.be.eql({
              visible: true,
              x: 1,
              y: 2,
              width: 3,
              height: 4
            });

          case 1:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  });

  // these are used for both parseWindows and getSystemBars tests
  var validWindowOutput = ['  Window #1 Derp', '    stuff', '      Surface: derp shown=false lalalala rect=(9.0,8.0) 7.0 x 6.0', '    more stuff', '  Window #2 StatusBar', '    blah blah blah', '      Surface: blah blah shown=true blah blah rect=(1.0,2.0) 3.0 x 4.0', '    blah blah blah', '  Window #3 NavigationBar', '    womp womp', '      Surface: blah blah shown=false womp womp rect=(5.0,6.0) 50.0 x 60.0', '    qwerty asd zxc'].join('\n');
  var validSystemBars = {
    statusBar: { visible: true, x: 1, y: 2, width: 3, height: 4 },
    navigationBar: { visible: false, x: 5, y: 6, width: 50, height: 60 }
  };

  describe('parseWindows', function () {
    it('should throw an error if the status bar info wasn\'t found', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            expect(function () {
              (0, _libCommandsGeneral.parseWindows)('');
            }).to['throw'](Error, /Failed to parse status bar information./);

          case 1:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should throw an error if the navigation bar info wasn\'t found', function callee$2$0() {
      var windowOutput;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            windowOutput = ['  Window #1 StatusBar', '    blah blah blah', '      Surface: blah blah shown=true blah blah rect=(1.0,2.0) 3.0 x 4.0', '    blah blah blah'].join('\n');

            expect(function () {
              (0, _libCommandsGeneral.parseWindows)(windowOutput);
            }).to['throw'](Error, /Failed to parse navigation bar information./);

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should return status and navigation bar info when both are given', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            (0, _libCommandsGeneral.parseWindows)(validWindowOutput).should.be.eql(validSystemBars);

          case 1:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  });
  describe('getSystemBars', function () {
    it('should throw an error if there\'s no window manager output', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver = new _2['default']();
            driver.adb = {};
            driver.adb.shell = function () {
              return '';
            };
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.getSystemBars().should.be.rejectedWith(/Did not get window manager output./));

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should return the parsed system bar info', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver = new _2['default']();
            driver.adb = {};
            driver.adb.shell = function () {
              return validWindowOutput;
            };
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.getSystemBars());

          case 5:
            context$3$0.t0 = validSystemBars;
            context$3$0.sent.should.be.eql(context$3$0.t0);

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvdW5pdC9jb21tYW5kcy9nZW5lcmFsLXNwZWNzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O29CQUFpQixNQUFNOzs7OzhCQUNJLGtCQUFrQjs7OztxQkFDM0IsT0FBTzs7OztnQkFDQyxVQUFVOzs7O2tDQUNXLCtCQUErQjs7aUNBQzFELDhCQUE4Qjs7OztpQ0FDeEIscUJBQXFCOzs2QkFDNUIsZ0JBQWdCOztzQ0FDYiwwQkFBMEI7Ozs7d0JBQ2xDLFVBQVU7Ozs7eUJBQ1IsWUFBWTs7OztBQUU1QixrQkFBSyxNQUFNLEVBQUUsQ0FBQztBQUNkLGtCQUFLLEdBQUcsNkJBQWdCLENBQUM7O0FBRXpCLElBQUksTUFBTSxZQUFBLENBQUM7QUFDWCxJQUFJLE9BQU8sR0FBRyxtQkFBTSxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDckMsSUFBSSxNQUFNLEdBQUcsa0JBQUssTUFBTSxDQUFDOztBQUV6QixRQUFRLENBQUMsU0FBUyxFQUFFLFlBQU07QUFDeEIsWUFBVSxDQUFDLFlBQU07QUFDZixVQUFNLEdBQUcsbUJBQW1CLENBQUM7QUFDN0IsVUFBTSxDQUFDLFNBQVMsR0FBRyx5Q0FBZSxDQUFDO0FBQ25DLFVBQU0sQ0FBQyxHQUFHLEdBQUcsNEJBQVMsQ0FBQztBQUN2QixVQUFNLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQztBQUNqQixVQUFNLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQztHQUNsQixDQUFDLENBQUM7QUFDSCxXQUFTLENBQUMsWUFBTTtBQUNkLFdBQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQztHQUNuQixDQUFDLENBQUM7QUFDSCxVQUFRLENBQUMsTUFBTSxFQUFFLFlBQU07QUFDckIsTUFBRSxDQUFDLGdEQUFnRCxFQUFFOzs7O0FBQ25ELG1CQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsWUFBWSxDQUFDLENBQUM7QUFDN0Msa0JBQU0sQ0FBQyxJQUFJLENBQUMsZUFBZSxHQUFHLElB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QUUscUJBQU8saUJBQWlCLENBQUM7YUFBRSxDQUFDOzs2Q0FDaEQsTUFBTSxDQUFDLGFBQWEsRUFBRTs7OzZCQUFnQixlQUFlOzZCQUE3QixNQUFNLENBQUMsRUFBRSxDQUFDLEdBQUc7Ozs7Ozs7S0FDN0MsQ0FBQyxDQUFDO0dBQ0osQ0FBQyxDQUFDO0NBQ0osQ0FBQyxDQUFDIiwiZmlsZSI6InRlc3QvdW5pdC9jb21tYW5kcy9nZW5lcmFsLXNwZWNzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNoYWkgZnJvbSAnY2hhaSc7XG5pbXBvcnQgY2hhaUFzUHJvbWlzZWQgZnJvbSAnY2hhaS1hcy1wcm9taXNlZCc7XG5pbXBvcnQgc2lub24gZnJvbSAnc2lub24nO1xuaW1wb3J0IEFuZHJvaWREcml2ZXIgZnJvbSAnLi4vLi4vLi4nO1xuaW1wb3J0IHsgcGFyc2VTdXJmYWNlTGluZSwgcGFyc2VXaW5kb3dzIH0gZnJvbSAnLi4vLi4vLi4vbGliL2NvbW1hbmRzL2dlbmVyYWwnO1xuaW1wb3J0IGhlbHBlcnMgZnJvbSAnLi4vLi4vLi4vbGliL2FuZHJvaWQtaGVscGVycyc7XG5pbXBvcnQgeyB3aXRoTW9ja3MgfSBmcm9tICdhcHBpdW0tdGVzdC1zdXBwb3J0JztcbmltcG9ydCB7IGZzIH0gZnJvbSAnYXBwaXVtLXN1cHBvcnQnO1xuaW1wb3J0IEJvb3RzdHJhcCBmcm9tICdhcHBpdW0tYW5kcm9pZC1ib290c3RyYXAnO1xuaW1wb3J0IEIgZnJvbSAnYmx1ZWJpcmQnO1xuaW1wb3J0IEFEQiBmcm9tICdhcHBpdW0tYWRiJztcblxuY2hhaS5zaG91bGQoKTtcbmNoYWkudXNlKGNoYWlBc1Byb21pc2VkKTtcblxubGV0IGRyaXZlcjtcbmxldCBzYW5kYm94ID0gc2lub24uc2FuZGJveC5jcmVhdGUoKTtcbmxldCBleHBlY3QgPSBjaGFpLmV4cGVjdDtcblxuZGVzY3JpYmUoJ0dlbmVyYWwnLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGRyaXZlciA9IG5ldyBBbmRyb2lkRHJpdmVyKCk7XG4gICAgZHJpdmVyLmJvb3RzdHJhcCA9IG5ldyBCb290c3RyYXAoKTtcbiAgICBkcml2ZXIuYWRiID0gbmV3IEFEQigpO1xuICAgIGRyaXZlci5jYXBzID0ge307XG4gICAgZHJpdmVyLm9wdHMgPSB7fTtcbiAgfSk7XG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgc2FuZGJveC5yZXN0b3JlKCk7XG4gIH0pO1xuICBkZXNjcmliZSgna2V5cycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHNlbmQga2V5cyB2aWEgc2V0VGV4dCBib290c3RyYXAgY29tbWFuZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYm9vdHN0cmFwLCAnc2VuZEFjdGlvbicpO1xuICAgICAgZHJpdmVyLm9wdHMudW5pY29kZUtleWJvYXJkID0gdHJ1ZTtcbiAgICAgIGF3YWl0IGRyaXZlci5rZXlzKCdrZXlzJyk7XG4gICAgICBkcml2ZXIuYm9vdHN0cmFwLnNlbmRBY3Rpb25cbiAgICAgICAgLmNhbGxlZFdpdGhFeGFjdGx5KCdzZXRUZXh0JyxcbiAgICAgICAgICB7dGV4dDogJ2tleXMnLCByZXBsYWNlOiBmYWxzZSwgdW5pY29kZUtleWJvYXJkOiB0cnVlfSlcbiAgICAgICAgLnNob3VsZC5iZS50cnVlO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgam9pbiBrZXlzIGlmIGtleXMgaXMgYXJyYXknLCBhc3luYyAoKSA9PiB7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLmJvb3RzdHJhcCwgJ3NlbmRBY3Rpb24nKTtcbiAgICAgIGRyaXZlci5vcHRzLnVuaWNvZGVLZXlib2FyZCA9IGZhbHNlO1xuICAgICAgYXdhaXQgZHJpdmVyLmtleXMoWydrJywgJ2UnLCAneScsICdzJ10pO1xuICAgICAgZHJpdmVyLmJvb3RzdHJhcC5zZW5kQWN0aW9uXG4gICAgICAgIC5jYWxsZWRXaXRoRXhhY3RseSgnc2V0VGV4dCcsIHt0ZXh0OiAna2V5cycsIHJlcGxhY2U6IGZhbHNlfSlcbiAgICAgICAgLnNob3VsZC5iZS50cnVlO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoJ2dldERldmljZVRpbWUnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZGV2aWNlIHRpbWUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLmFkYiwgJ3NoZWxsJyk7XG4gICAgICBkcml2ZXIuYWRiLnNoZWxsLnJldHVybnMoJyAxMToxMiAnKTtcbiAgICAgIGF3YWl0IGRyaXZlci5nZXREZXZpY2VUaW1lKCkuc2hvdWxkLmJlY29tZSgnMTE6MTInKTtcbiAgICAgIGRyaXZlci5hZGIuc2hlbGwuY2FsbGVkV2l0aEV4YWN0bHkoWydkYXRlJ10pLnNob3VsZC5iZS50cnVlO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgdGhvcndzIGVycm9yIGlmIHNoZWxsIGNvbW1hbmQgZmFpbGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlci5hZGIsICdzaGVsbCcpLnRocm93cygpO1xuICAgICAgYXdhaXQgZHJpdmVyLmdldERldmljZVRpbWUoKS5zaG91bGQuYmUucmVqZWN0ZWRXaXRoKCdDb3VsZCBub3QgY2FwdHVyZScpO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoJ2dldFBhZ2VTb3VyY2UnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gcGFnZSBzb3VyY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLmJvb3RzdHJhcCwgJ3NlbmRBY3Rpb24nKS53aXRoQXJncygnc291cmNlJykucmV0dXJucygnc291cmNlcycpO1xuICAgICAgYXdhaXQgZHJpdmVyLmdldFBhZ2VTb3VyY2UoKS5zaG91bGQuYmUuZXF1YWwoJ3NvdXJjZXMnKTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdiYWNrJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcHJlc3MgYmFjaycsIGFzeW5jICgpID0+IHtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYm9vdHN0cmFwLCAnc2VuZEFjdGlvbicpO1xuICAgICAgYXdhaXQgZHJpdmVyLmJhY2soKTtcbiAgICAgIGRyaXZlci5ib290c3RyYXAuc2VuZEFjdGlvbi5jYWxsZWRXaXRoRXhhY3RseSgncHJlc3NCYWNrJykuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgnaXNLZXlib2FyZFNob3duJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHRydWUgaWYgdGhlIGtleWJvYXJkIGlzIHNob3duJywgYXN5bmMgKCkgPT4ge1xuICAgICAgZHJpdmVyLmFkYi5pc1NvZnRLZXlib2FyZFByZXNlbnQgPSAoKSA9PiB7IHJldHVybiB7aXNLZXlib2FyZFNob3duOiB0cnVlLCBjYW5DbG9zZUtleWJvYXJkOiB0cnVlfTsgfTtcbiAgICAgIChhd2FpdCBkcml2ZXIuaXNLZXlib2FyZFNob3duKCkpLnNob3VsZC5lcXVhbCh0cnVlKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBmYWxzZSBpZiB0aGUga2V5Ym9hcmQgaXMgbm90IHNob3duJywgYXN5bmMgKCkgPT4ge1xuICAgICAgZHJpdmVyLmFkYi5pc1NvZnRLZXlib2FyZFByZXNlbnQgPSAoKSA9PiB7IHJldHVybiB7aXNLZXlib2FyZFNob3duOiBmYWxzZSwgY2FuQ2xvc2VLZXlib2FyZDogdHJ1ZX07IH07XG4gICAgICAoYXdhaXQgZHJpdmVyLmlzS2V5Ym9hcmRTaG93bigpKS5zaG91bGQuZXF1YWwoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoJ2hpZGVLZXlib2FyZCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhpZGUga2V5Ym9hcmQgdmlhIGJhY2sgY29tbWFuZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIsICdiYWNrJyk7XG4gICAgICBkcml2ZXIuYWRiLmlzU29mdEtleWJvYXJkUHJlc2VudCA9ICgpID0+IHsgcmV0dXJuIHtpc0tleWJvYXJkU2hvd246IHRydWUsIGNhbkNsb3NlS2V5Ym9hcmQ6IHRydWV9OyB9O1xuICAgICAgYXdhaXQgZHJpdmVyLmhpZGVLZXlib2FyZCgpO1xuICAgICAgZHJpdmVyLmJhY2suY2FsbGVkT25jZS5zaG91bGQuYmUudHJ1ZTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIG5vdCBjYWxsIGJhY2sgY29tbWFuZCBpZiBjYW5cXCd0IGNsb3NlIGtleWJvYXJkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlciwgJ2JhY2snKTtcbiAgICAgIGRyaXZlci5hZGIuaXNTb2Z0S2V5Ym9hcmRQcmVzZW50ID0gKCkgPT4geyByZXR1cm4ge2lzS2V5Ym9hcmRTaG93bjogdHJ1ZSwgY2FuQ2xvc2VLZXlib2FyZDogZmFsc2V9OyB9O1xuICAgICAgYXdhaXQgZHJpdmVyLmhpZGVLZXlib2FyZCgpO1xuICAgICAgZHJpdmVyLmJhY2subm90Q2FsbGVkLnNob3VsZC5iZS50cnVlO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgdGhyb3cgYW4gZXJyb3IgaWYgbm8ga2V5Ym9hcmQgaXMgcHJlc2VudCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGRyaXZlci5hZGIuaXNTb2Z0S2V5Ym9hcmRQcmVzZW50ID0gKCkgPT4geyByZXR1cm4gZmFsc2U7IH07XG4gICAgICBhd2FpdCBkcml2ZXIuaGlkZUtleWJvYXJkKCkuc2hvdWxkLmJlLnJlamVjdGVkV2l0aCgvbm90IHByZXNlbnQvKTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdvcGVuU2V0dGluZ3NBY3Rpdml0eScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIG9wZW4gc2V0dGluZ3MgYWN0aXZpdHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLmFkYiwgJ2dldEZvY3VzZWRQYWNrYWdlQW5kQWN0aXZpdHknKVxuICAgICAgICAucmV0dXJucyh7YXBwUGFja2FnZTogJ3BrZycsIGFwcEFjdGl2aXR5OiAnYWN0J30pO1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlci5hZGIsICdzaGVsbCcpO1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlci5hZGIsICd3YWl0Rm9yTm90QWN0aXZpdHknKTtcbiAgICAgIGF3YWl0IGRyaXZlci5vcGVuU2V0dGluZ3NBY3Rpdml0eSgnc2V0MScpO1xuICAgICAgZHJpdmVyLmFkYi5zaGVsbC5jYWxsZWRXaXRoRXhhY3RseShbJ2FtJywgJ3N0YXJ0JywgJy1hJywgJ2FuZHJvaWQuc2V0dGluZ3Muc2V0MSddKVxuICAgICAgICAuc2hvdWxkLmJlLnRydWU7XG4gICAgICBkcml2ZXIuYWRiLndhaXRGb3JOb3RBY3Rpdml0eS5jYWxsZWRXaXRoRXhhY3RseSgncGtnJywgJ2FjdCcsIDUwMDApXG4gICAgICAgIC5zaG91bGQuYmUudHJ1ZTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdnZXRXaW5kb3dTaXplJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZ2V0IHdpbmRvdyBzaXplJywgYXN5bmMgKCkgPT4ge1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlci5ib290c3RyYXAsICdzZW5kQWN0aW9uJylcbiAgICAgICAgLndpdGhBcmdzKCdnZXREZXZpY2VTaXplJykucmV0dXJucygnc2l6ZScpO1xuICAgICAgYXdhaXQgZHJpdmVyLmdldFdpbmRvd1NpemUoKS5zaG91bGQuYmUuZXF1YWwoJ3NpemUnKTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdnZXRDdXJyZW50QWN0aXZpdHknLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBnZXQgY3VycmVudCBhY3Rpdml0eScsIGFzeW5jICgpID0+IHtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYWRiLCAnZ2V0Rm9jdXNlZFBhY2thZ2VBbmRBY3Rpdml0eScpXG4gICAgICAgIC5yZXR1cm5zKHthcHBBY3Rpdml0eTogJ2FjdCd9KTtcbiAgICAgIGF3YWl0IGRyaXZlci5nZXRDdXJyZW50QWN0aXZpdHkoKS5zaG91bGQuZXZlbnR1YWxseS5iZS5lcXVhbCgnYWN0Jyk7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgnZ2V0Q3VycmVudFBhY2thZ2UnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBnZXQgY3VycmVudCBhY3Rpdml0eScsIGFzeW5jICgpID0+IHtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYWRiLCAnZ2V0Rm9jdXNlZFBhY2thZ2VBbmRBY3Rpdml0eScpXG4gICAgICAgIC5yZXR1cm5zKHthcHBQYWNrYWdlOiAncGtnJ30pO1xuICAgICAgYXdhaXQgZHJpdmVyLmdldEN1cnJlbnRQYWNrYWdlKCkuc2hvdWxkLmV2ZW50dWFsbHkuZXF1YWwoJ3BrZycpO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoJ2dldExvZ1R5cGVzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZ2V0IGxvZyB0eXBlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGRyaXZlci5nZXRMb2dUeXBlcygpLnNob3VsZC5iZS5kZWVwLmVxdWFsKFsnbG9nY2F0J10pO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoJ2dldExvZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGdldCBsb2cgdHlwZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLmFkYiwgJ2dldExvZ2NhdExvZ3MnKS5yZXR1cm5zKCdsb2dzJyk7XG4gICAgICBhd2FpdCBkcml2ZXIuZ2V0TG9nKCdsb2djYXQnKS5zaG91bGQuYmUuZXF1YWwoJ2xvZ3MnKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHRocm93cyBleGNlcHRpb24gaWYgbG9nIHR5cGUgaXMgdW5zdXBwb3J0ZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBleHBlY3QoKCkgPT4gZHJpdmVyLmdldExvZygndW5zdXBwb3J0ZWRfdHlwZScpKVxuICAgICAgICAudG8udGhyb3coJ1Vuc3VwcG9ydGVkIGxvZyB0eXBlIHVuc3VwcG9ydGVkX3R5cGUnKTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdpc0FwcEluc3RhbGxlZCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiB0cnVlIGlmIGFwcCBpcyBpbnN0YWxsZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLmFkYiwgJ2lzQXBwSW5zdGFsbGVkJykud2l0aEFyZ3MoJ3BrZycpLnJldHVybnModHJ1ZSk7XG4gICAgICBhd2FpdCBkcml2ZXIuaXNBcHBJbnN0YWxsZWQoJ3BrZycpLnNob3VsZC5iZS50cnVlO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoJ3JlbW92ZUFwcCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJlbW92ZSBhcHAnLCBhc3luYyAoKSA9PiB7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLmFkYiwgJ3VuaW5zdGFsbEFwaycpLndpdGhBcmdzKCdwa2cnKS5yZXR1cm5zKHRydWUpO1xuICAgICAgYXdhaXQgZHJpdmVyLnJlbW92ZUFwcCgncGtnJykuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgnaW5zdGFsbEFwcCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGluc3RhbGwgYXBwJywgYXN5bmMgKCkgPT4ge1xuICAgICAgZHJpdmVyLm9wdHMuZmFzdFJlc2V0ID0gJ2Zhc3RSZXNldCc7XG4gICAgICBsZXQgYXBwID0gJ2FwcC5hcGsnO1xuICAgICAgbGV0IG9wdHMgPSB7YXBwOiAnYXBwLmFwaycsIGFwcFBhY2thZ2U6ICdwa2cnLCBmYXN0UmVzZXQ6ICdmYXN0UmVzZXQnfTtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuaGVscGVycywgJ2NvbmZpZ3VyZUFwcCcpLndpdGhBcmdzKCdhcHAnLCAnLmFwaycpXG4gICAgICAgIC5yZXR1cm5zKGFwcCk7XG4gICAgICBzYW5kYm94LnN0dWIoZnMsICdleGlzdHMnKS53aXRoQXJncyhhcHApLnJldHVybnModHJ1ZSk7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLmFkYiwgJ3BhY2thZ2VBbmRMYXVuY2hBY3Rpdml0eUZyb21NYW5pZmVzdCcpXG4gICAgICAgIC53aXRoQXJncyhhcHApLnJldHVybnMoe2Fwa1BhY2thZ2U6ICdwa2cnfSk7XG4gICAgICBzYW5kYm94LnN0dWIoaGVscGVycywgJ2luc3RhbGxBcGtSZW1vdGVseScpXG4gICAgICAgIC5yZXR1cm5zKHRydWUpO1xuICAgICAgYXdhaXQgZHJpdmVyLmluc3RhbGxBcHAoJ2FwcCcpLnNob3VsZC5ldmVudHVhbGx5LmJlLnRydWU7XG4gICAgICBkcml2ZXIuaGVscGVycy5jb25maWd1cmVBcHAuY2FsbGVkT25jZS5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIGZzLmV4aXN0cy5jYWxsZWRPbmNlLnNob3VsZC5iZS50cnVlO1xuICAgICAgZHJpdmVyLmFkYi5wYWNrYWdlQW5kTGF1bmNoQWN0aXZpdHlGcm9tTWFuaWZlc3QuY2FsbGVkT25jZS5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIGhlbHBlcnMuaW5zdGFsbEFwa1JlbW90ZWx5LmNhbGxlZFdpdGhFeGFjdGx5KGRyaXZlci5hZGIsIG9wdHMpXG4gICAgICAgIC5zaG91bGQuYmUudHJ1ZTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHRocm93IGFuIGVycm9yIGlmIEFQSyBkb2VzIG5vdCBleGlzdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGRyaXZlci5pbnN0YWxsQXBwKCdub24vZXhpc3RlbnQvYXBwLmFwaycpLnNob3VsZC5iZS5yZWplY3RlZFdpdGgoL0NvdWxkIG5vdCBmaW5kLyk7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgnYmFja2dyb3VuZCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGJyaW5nIGFwcCB0byBiYWNrZ3JvdW5kJywgYXN5bmMgKCkgPT4ge1xuICAgICAgZHJpdmVyLm9wdHMgPSB7YXBwUGFja2FnZTogJ3BrZycsIGFwcEFjdGl2aXR5OiAnYWN2JywgaW50ZW50QWN0aW9uOiAnYWN0JyxcbiAgICAgICAgICAgICAgICAgICAgIGludGVudENhdGVnb3J5OiAnY2F0JywgaW50ZW50RmxhZ3M6ICdmbGdzJyxcbiAgICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsSW50ZW50QXJndW1lbnRzOiAnb3B0J307XG4gICAgICBsZXQgcGFyYW1zID0ge3BrZzogJ3BrZycsIGFjdGl2aXR5OiAnYWN2JywgYWN0aW9uOiAnYWN0JywgY2F0ZWdvcnk6ICdjYXQnLFxuICAgICAgICAgICAgICAgICAgICBmbGFnczogJ2ZsZ3MnLCB3YWl0UGtnOiAnd3BrZycsIHdhaXRBY3Rpdml0eTogJ3dhY3YnLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbEludGVudEFyZ3VtZW50czogJ29wdCcsIHN0b3BBcHA6IGZhbHNlfTtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYWRiLCAnZ29Ub0hvbWUnKTtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYWRiLCAnZ2V0Rm9jdXNlZFBhY2thZ2VBbmRBY3Rpdml0eScpXG4gICAgICAgIC5yZXR1cm5zKHthcHBQYWNrYWdlOiAnd3BrZycsIGFwcEFjdGl2aXR5OiAnd2Fjdid9KTtcbiAgICAgIHNhbmRib3guc3R1YihCLCAnZGVsYXknKTtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYWRiLCAnc3RhcnRBcHAnKTtcbiAgICAgIGF3YWl0IGRyaXZlci5iYWNrZ3JvdW5kKDEwKTtcbiAgICAgIGRyaXZlci5hZGIuZ2V0Rm9jdXNlZFBhY2thZ2VBbmRBY3Rpdml0eS5jYWxsZWRPbmNlLnNob3VsZC5iZS50cnVlO1xuICAgICAgZHJpdmVyLmFkYi5nb1RvSG9tZS5jYWxsZWRPbmNlLnNob3VsZC5iZS50cnVlO1xuICAgICAgQi5kZWxheS5jYWxsZWRXaXRoRXhhY3RseSgxMDAwMCkuc2hvdWxkLmJlLnRydWU7XG4gICAgICBkcml2ZXIuYWRiLnN0YXJ0QXBwLmNhbGxlZFdpdGhFeGFjdGx5KHBhcmFtcykuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBub3QgYnJpbmcgYXBwIGJhY2sgaWYgc2Vjb25kcyBhcmUgbmVnYXRpdmUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLmFkYiwgJ2dvVG9Ib21lJyk7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLmFkYiwgJ3N0YXJ0QXBwJyk7XG4gICAgICBhd2FpdCBkcml2ZXIuYmFja2dyb3VuZCgtMSk7XG4gICAgICBkcml2ZXIuYWRiLmdvVG9Ib21lLmNhbGxlZE9uY2Uuc2hvdWxkLmJlLnRydWU7XG4gICAgICBkcml2ZXIuYWRiLnN0YXJ0QXBwLm5vdENhbGxlZC5zaG91bGQuYmUudHJ1ZTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdnZXRTdHJpbmdzJywgd2l0aE1vY2tzKHtoZWxwZXJzfSwgKG1vY2tzKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gYXBwIHN0cmluZ3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBkcml2ZXIuYm9vdHN0cmFwLnNlbmRBY3Rpb24gPSAoKSA9PiB7IHJldHVybiAnJzsgfTtcbiAgICAgIG1vY2tzLmhlbHBlcnMuZXhwZWN0cyhcInB1c2hTdHJpbmdzXCIpXG4gICAgICAgICAgLnJldHVybnMoeyd0ZXN0JzogJ2VuX3ZhbHVlJ30pO1xuICAgICAgbGV0IHN0cmluZ3MgPSBhd2FpdCBkcml2ZXIuZ2V0U3RyaW5ncygnZW4nKTtcbiAgICAgIHN0cmluZ3MudGVzdC5zaG91bGQuZXF1YWwoJ2VuX3ZhbHVlJyk7XG4gICAgICBtb2Nrcy5oZWxwZXJzLnZlcmlmeSgpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIGNhY2hlZCBhcHAgc3RyaW5ncyBmb3IgdGhlIHNwZWNpZmllZCBsYW5ndWFnZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGRyaXZlci5hZGIuZ2V0RGV2aWNlTGFuZ3VhZ2UgPSAoKSA9PiB7IHJldHVybiAnZW4nOyB9O1xuICAgICAgZHJpdmVyLmFwa1N0cmluZ3MuZW4gPSB7J3Rlc3QnOiAnZW5fdmFsdWUnfTtcbiAgICAgIGRyaXZlci5hcGtTdHJpbmdzLmZyID0geyd0ZXN0JzogJ2ZyX3ZhbHVlJ307XG4gICAgICBsZXQgc3RyaW5ncyA9IGF3YWl0IGRyaXZlci5nZXRTdHJpbmdzKCdmcicpO1xuICAgICAgc3RyaW5ncy50ZXN0LnNob3VsZC5lcXVhbCgnZnJfdmFsdWUnKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBjYWNoZWQgYXBwIHN0cmluZ3MgZm9yIHRoZSBkZXZpY2UgbGFuZ3VhZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBkcml2ZXIuYWRiLmdldERldmljZUxhbmd1YWdlID0gKCkgPT4geyByZXR1cm4gJ2VuJzsgfTtcbiAgICAgIGRyaXZlci5hcGtTdHJpbmdzLmVuID0geyd0ZXN0JzogJ2VuX3ZhbHVlJ307XG4gICAgICBkcml2ZXIuYXBrU3RyaW5ncy5mciA9IHsndGVzdCc6ICdmcl92YWx1ZSd9O1xuICAgICAgbGV0IHN0cmluZ3MgPSBhd2FpdCBkcml2ZXIuZ2V0U3RyaW5ncygpO1xuICAgICAgc3RyaW5ncy50ZXN0LnNob3VsZC5lcXVhbCgnZW5fdmFsdWUnKTtcbiAgICB9KTtcbiAgfSkpO1xuICBkZXNjcmliZSgnbGF1bmNoQXBwJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaW5pdCBhbmQgc3RhcnQgYXBwJywgYXN5bmMgKCkgPT4ge1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlciwgJ2luaXRBVVQnKTtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIsICdzdGFydEFVVCcpO1xuICAgICAgYXdhaXQgZHJpdmVyLmxhdW5jaEFwcCgpO1xuICAgICAgZHJpdmVyLmluaXRBVVQuY2FsbGVkT25jZS5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIGRyaXZlci5zdGFydEFVVC5jYWxsZWRPbmNlLnNob3VsZC5iZS50cnVlO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoJ3N0YXJ0QWN0aXZpdHknLCAoKSA9PiB7XG4gICAgbGV0IHBhcmFtcztcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIHBhcmFtcyA9IHtwa2c6ICdwa2cnLCBhY3Rpdml0eTogJ2FjdCcsIHdhaXRQa2c6ICd3cGtnJywgd2FpdEFjdGl2aXR5OiAnd2FjdCcsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAnYWN0JywgY2F0ZWdvcnk6ICdjYXQnLCBmbGFnczogJ2ZsZ3MnLCBvcHRpb25hbEludGVudEFyZ3VtZW50czogJ29wdCd9O1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlci5hZGIsICdzdGFydEFwcCcpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgc3RhcnQgYWN0aXZpdHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBwYXJhbXMub3B0aW9uYWxJbnRlbnRBcmd1bWVudHMgPSAnb3B0JztcbiAgICAgIHBhcmFtcy5zdG9wQXBwID0gZmFsc2U7XG4gICAgICBhd2FpdCBkcml2ZXIuc3RhcnRBY3Rpdml0eSgncGtnJywgJ2FjdCcsICd3cGtnJywgJ3dhY3QnLCAnYWN0JyxcbiAgICAgICAgJ2NhdCcsICdmbGdzJywgJ29wdCcsIHRydWUpO1xuICAgICAgZHJpdmVyLmFkYi5zdGFydEFwcC5jYWxsZWRXaXRoRXhhY3RseShwYXJhbXMpLnNob3VsZC5iZS50cnVlO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgdXNlIGRvbnRTdG9wQXBwT25SZXNldCBmcm9tIG9wdHMgaWYgaXQgaXMgbm90IHBhc3NlZCBhcyBwYXJhbScsIGFzeW5jICgpID0+IHtcbiAgICAgIGRyaXZlci5vcHRzLmRvbnRTdG9wQXBwT25SZXNldCA9IHRydWU7XG4gICAgICBwYXJhbXMuc3RvcEFwcCA9IGZhbHNlO1xuICAgICAgYXdhaXQgZHJpdmVyLnN0YXJ0QWN0aXZpdHkoJ3BrZycsICdhY3QnLCAnd3BrZycsICd3YWN0JywgJ2FjdCcsICdjYXQnLCAnZmxncycsICdvcHQnKTtcbiAgICAgIGRyaXZlci5hZGIuc3RhcnRBcHAuY2FsbGVkV2l0aEV4YWN0bHkocGFyYW1zKS5zaG91bGQuYmUudHJ1ZTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHVzZSBhcHBQYWNrYWdlIGFuZCBhcHBBY3Rpdml0eSBpZiBhcHBXYWl0UGFja2FnZSBhbmQgYXBwV2FpdEFjdGl2aXR5IGFyZSB1bmRlZmluZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBwYXJhbXMud2FpdFBrZyA9ICdwa2cnO1xuICAgICAgcGFyYW1zLndhaXRBY3Rpdml0eSA9ICdhY3QnO1xuICAgICAgcGFyYW1zLnN0b3BBcHAgPSB0cnVlO1xuICAgICAgYXdhaXQgZHJpdmVyLnN0YXJ0QWN0aXZpdHkoJ3BrZycsICdhY3QnLCBudWxsLCBudWxsLCAnYWN0JywgJ2NhdCcsICdmbGdzJywgJ29wdCcsIGZhbHNlKTtcbiAgICAgIGRyaXZlci5hZGIuc3RhcnRBcHAuY2FsbGVkV2l0aEV4YWN0bHkocGFyYW1zKS5zaG91bGQuYmUudHJ1ZTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdyZXNldCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJlc2V0IGFwcCB2aWEgcmVpbnN0YWxsIGlmIGZ1bGxSZXNldCBpcyB0cnVlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgZHJpdmVyLm9wdHMuZnVsbFJlc2V0ID0gdHJ1ZTtcbiAgICAgIGRyaXZlci5vcHRzLmFwcFBhY2thZ2UgPSAncGtnJztcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYWRiLCAnc3RvcEFuZENsZWFyJyk7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLmFkYiwgJ3VuaW5zdGFsbEFwaycpO1xuICAgICAgc2FuZGJveC5zdHViKGhlbHBlcnMsICdpbnN0YWxsQXBrUmVtb3RlbHknKTtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIsICdncmFudFBlcm1pc3Npb25zJyk7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLCAnc3RhcnRBVVQnKS5yZXR1cm5zKCdhdXQnKTtcbiAgICAgIGF3YWl0IGRyaXZlci5yZXNldCgpLnNob3VsZC5ldmVudHVhbGx5LmJlLmVxdWFsKCdhdXQnKTtcbiAgICAgIGRyaXZlci5hZGIuc3RvcEFuZENsZWFyLmNhbGxlZFdpdGhFeGFjdGx5KCdwa2cnKS5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIGRyaXZlci5hZGIudW5pbnN0YWxsQXBrLmNhbGxlZFdpdGhFeGFjdGx5KCdwa2cnKS5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIGhlbHBlcnMuaW5zdGFsbEFwa1JlbW90ZWx5LmNhbGxlZFdpdGhFeGFjdGx5KGRyaXZlci5hZGIsIGRyaXZlci5vcHRzKVxuICAgICAgICAuc2hvdWxkLmJlLnRydWU7XG4gICAgICBkcml2ZXIuZ3JhbnRQZXJtaXNzaW9ucy5jYWxsZWRPbmNlLnNob3VsZC5iZS50cnVlO1xuICAgICAgZHJpdmVyLnN0YXJ0QVVULmNhbGxlZE9uY2Uuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBkbyBmYXN0IHJlc2V0IGlmIGZ1bGxSZXNldCBpcyBmYWxzZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGRyaXZlci5vcHRzLmZ1bGxSZXNldCA9IGZhbHNlO1xuICAgICAgZHJpdmVyLm9wdHMuYXBwUGFja2FnZSA9ICdwa2cnO1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlci5hZGIsICdzdG9wQW5kQ2xlYXInKTtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIsICdncmFudFBlcm1pc3Npb25zJyk7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLCAnc3RhcnRBVVQnKS5yZXR1cm5zKCdhdXQnKTtcbiAgICAgIGF3YWl0IGRyaXZlci5yZXNldCgpLnNob3VsZC5ldmVudHVhbGx5LmJlLmVxdWFsKCdhdXQnKTtcbiAgICAgIGRyaXZlci5hZGIuc3RvcEFuZENsZWFyLmNhbGxlZFdpdGhFeGFjdGx5KCdwa2cnKS5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIGRyaXZlci5ncmFudFBlcm1pc3Npb25zLmNhbGxlZE9uY2Uuc2hvdWxkLmJlLnRydWU7XG4gICAgICBkcml2ZXIuc3RhcnRBVVQuY2FsbGVkT25jZS5zaG91bGQuYmUudHJ1ZTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdzdGFydEFVVCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHN0YXJ0IEFVVCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGRyaXZlci5vcHRzID0ge2FwcFBhY2thZ2U6ICdwa2cnLCBhcHBBY3Rpdml0eTogJ2FjdCcsIGludGVudEFjdGlvbjogJ2FjdG4nLFxuICAgICAgICAgICAgICAgICAgICAgaW50ZW50Q2F0ZWdvcnk6ICdjYXQnLCBpbnRlbnRGbGFnczogJ2ZsZ3MnLCBhcHBXYWl0UGFja2FnZTogJ3dwa2cnLFxuICAgICAgICAgICAgICAgICAgICAgYXBwV2FpdEFjdGl2aXR5OiAnd2FjdCcsIGFwcFdhaXREdXJhdGlvbjogJ3dkdXInLFxuICAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWxJbnRlbnRBcmd1bWVudHM6ICdvcHQnfTtcbiAgICAgIGxldCBwYXJhbXMgPSB7cGtnOiAncGtnJywgYWN0aXZpdHk6ICdhY3QnLCBhY3Rpb246ICdhY3RuJywgY2F0ZWdvcnk6ICdjYXQnLFxuICAgICAgICAgICAgICAgICAgICBmbGFnczogJ2ZsZ3MnLCB3YWl0UGtnOiAnd3BrZycsIHdhaXRBY3Rpdml0eTogJ3dhY3QnLFxuICAgICAgICAgICAgICAgICAgICB3YWl0RHVyYXRpb246ICd3ZHVyJywgb3B0aW9uYWxJbnRlbnRBcmd1bWVudHM6ICdvcHQnLCBzdG9wQXBwOiBmYWxzZX07XG4gICAgICBkcml2ZXIub3B0cy5kb250U3RvcEFwcE9uUmVzZXQgPSB0cnVlO1xuICAgICAgcGFyYW1zLnN0b3BBcHAgPSBmYWxzZTtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYWRiLCAnc3RhcnRBcHAnKTtcbiAgICAgIGF3YWl0IGRyaXZlci5zdGFydEFVVCgpO1xuICAgICAgZHJpdmVyLmFkYi5zdGFydEFwcC5jYWxsZWRXaXRoRXhhY3RseShwYXJhbXMpLnNob3VsZC5iZS50cnVlO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoJ3NldFVybCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHNldCB1cmwnLCBhc3luYyAoKSA9PiB7XG4gICAgICBkcml2ZXIub3B0cyA9IHthcHBQYWNrYWdlOiAncGtnJ307XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLmFkYiwgJ3N0YXJ0VXJpJyk7XG4gICAgICBhd2FpdCBkcml2ZXIuc2V0VXJsKCd1cmwnKTtcbiAgICAgIGRyaXZlci5hZGIuc3RhcnRVcmkuY2FsbGVkV2l0aEV4YWN0bHkoJ3VybCcsICdwa2cnKS5zaG91bGQuYmUudHJ1ZTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdjbG9zZUFwcCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNsb3NlIGFwcCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGRyaXZlci5vcHRzID0ge2FwcFBhY2thZ2U6ICdwa2cnfTtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYWRiLCAnZm9yY2VTdG9wJyk7XG4gICAgICBhd2FpdCBkcml2ZXIuY2xvc2VBcHAoKTtcbiAgICAgIGRyaXZlci5hZGIuZm9yY2VTdG9wLmNhbGxlZFdpdGhFeGFjdGx5KCdwa2cnKS5zaG91bGQuYmUudHJ1ZTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdnZXREaXNwbGF5RGVuc2l0eScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiB0aGUgZGlzcGxheSBkZW5zaXR5IG9mIGEgZGV2aWNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgZHJpdmVyLmFkYi5zaGVsbCA9ICgpID0+IHsgcmV0dXJuICcxMjMnOyB9O1xuICAgICAgKGF3YWl0IGRyaXZlci5nZXREaXNwbGF5RGVuc2l0eSgpKS5zaG91bGQuZXF1YWwoMTIzKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHJldHVybiB0aGUgZGlzcGxheSBkZW5zaXR5IG9mIGFuIGVtdWxhdG9yJywgYXN5bmMgKCkgPT4ge1xuICAgICAgZHJpdmVyLmFkYi5zaGVsbCA9IChjbWQpID0+IHtcbiAgICAgICAgbGV0IGpvaW5lZENtZCA9IGNtZC5qb2luKCcgJyk7XG4gICAgICAgIGlmIChqb2luZWRDbWQuaW5kZXhPZigncm8uc2YnKSAhPT0gLTEpIHtcbiAgICAgICAgICAvLyBkZXZpY2UgcHJvcGVydHkgbG9vayB1cFxuICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfSBlbHNlIGlmIChqb2luZWRDbWQuaW5kZXhPZigncWVtdS5zZicpICE9PSAtMSkge1xuICAgICAgICAgIC8vIGVtdWxhdG9yIHByb3BlcnR5IGxvb2sgdXBcbiAgICAgICAgICByZXR1cm4gJzQ1Nic7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfTtcbiAgICAgIChhd2FpdCBkcml2ZXIuZ2V0RGlzcGxheURlbnNpdHkoKSkuc2hvdWxkLmVxdWFsKDQ1Nik7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBhbiBlcnJvciBpZiB0aGUgZGlzcGxheSBkZW5zaXR5IHByb3BlcnR5IGNhblxcJ3QgYmUgZm91bmQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBkcml2ZXIuYWRiLnNoZWxsID0gKCkgPT4geyByZXR1cm4gJyc7IH07XG4gICAgICBhd2FpdCBkcml2ZXIuZ2V0RGlzcGxheURlbnNpdHkoKS5zaG91bGQuYmUucmVqZWN0ZWRXaXRoKC9GYWlsZWQgdG8gZ2V0IGRpc3BsYXkgZGVuc2l0eSBwcm9wZXJ0eS8pO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgdGhyb3cgYW5kIGVycm9yIGlmIHRoZSBkaXNwbGF5IGRlbnNpdHkgaXMgbm90IGEgbnVtYmVyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgZHJpdmVyLmFkYi5zaGVsbCA9ICgpID0+IHsgcmV0dXJuICdhYmMnOyB9O1xuICAgICAgYXdhaXQgZHJpdmVyLmdldERpc3BsYXlEZW5zaXR5KCkuc2hvdWxkLmJlLnJlamVjdGVkV2l0aCgvRmFpbGVkIHRvIGdldCBkaXNwbGF5IGRlbnNpdHkgcHJvcGVydHkvKTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdwYXJzZVN1cmZhY2VMaW5lJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHZpc2libGUgdHJ1ZSBpZiB0aGUgc3VyZmFjZSBpcyB2aXNpYmxlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcGFyc2VTdXJmYWNlTGluZSgnc2hvd249dHJ1ZSByZWN0PTEgMSAxIDEnKS5zaG91bGQuYmUuZXFsKHtcbiAgICAgICAgdmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgeDogMSxcbiAgICAgICAgeTogMSxcbiAgICAgICAgd2lkdGg6IDEsXG4gICAgICAgIGhlaWdodDogMVxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdmlzaWJsZSBmYWxzZSBpZiB0aGUgc3VyZmFjZSBpcyBub3QgdmlzaWJsZScsIGFzeW5jICgpID0+IHtcbiAgICAgIHBhcnNlU3VyZmFjZUxpbmUoJ3Nob3duPWZhbHNlIHJlY3Q9MSAxIDEgMScpLnNob3VsZC5iZS5lcWwoe1xuICAgICAgICB2aXNpYmxlOiBmYWxzZSxcbiAgICAgICAgeDogMSxcbiAgICAgICAgeTogMSxcbiAgICAgICAgd2lkdGg6IDEsXG4gICAgICAgIGhlaWdodDogMVxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdGhlIHBhcnNlZCBzdXJmYWNlIGJvdW5kcycsIGFzeW5jICgpID0+IHtcbiAgICAgIHBhcnNlU3VyZmFjZUxpbmUoJ3Nob3duPXRydWUgcmVjdD0oMS4wLDIuMCkgMy4wIHggNC4wJykuc2hvdWxkLmJlLmVxbCh7XG4gICAgICAgIHZpc2libGU6IHRydWUsXG4gICAgICAgIHg6IDEsXG4gICAgICAgIHk6IDIsXG4gICAgICAgIHdpZHRoOiAzLFxuICAgICAgICBoZWlnaHQ6IDRcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICAvLyB0aGVzZSBhcmUgdXNlZCBmb3IgYm90aCBwYXJzZVdpbmRvd3MgYW5kIGdldFN5c3RlbUJhcnMgdGVzdHNcbiAgbGV0IHZhbGlkV2luZG93T3V0cHV0ID0gW1xuICAgICcgIFdpbmRvdyAjMSBEZXJwJyxcbiAgICAnICAgIHN0dWZmJyxcbiAgICAnICAgICAgU3VyZmFjZTogZGVycCBzaG93bj1mYWxzZSBsYWxhbGFsYSByZWN0PSg5LjAsOC4wKSA3LjAgeCA2LjAnLFxuICAgICcgICAgbW9yZSBzdHVmZicsXG4gICAgJyAgV2luZG93ICMyIFN0YXR1c0JhcicsXG4gICAgJyAgICBibGFoIGJsYWggYmxhaCcsXG4gICAgJyAgICAgIFN1cmZhY2U6IGJsYWggYmxhaCBzaG93bj10cnVlIGJsYWggYmxhaCByZWN0PSgxLjAsMi4wKSAzLjAgeCA0LjAnLFxuICAgICcgICAgYmxhaCBibGFoIGJsYWgnLFxuICAgICcgIFdpbmRvdyAjMyBOYXZpZ2F0aW9uQmFyJyxcbiAgICAnICAgIHdvbXAgd29tcCcsXG4gICAgJyAgICAgIFN1cmZhY2U6IGJsYWggYmxhaCBzaG93bj1mYWxzZSB3b21wIHdvbXAgcmVjdD0oNS4wLDYuMCkgNTAuMCB4IDYwLjAnLFxuICAgICcgICAgcXdlcnR5IGFzZCB6eGMnXG4gIF0uam9pbignXFxuJyk7XG4gIGxldCB2YWxpZFN5c3RlbUJhcnMgPSB7XG4gICAgc3RhdHVzQmFyOiB7dmlzaWJsZTogdHJ1ZSwgeDogMSwgeTogMiwgd2lkdGg6IDMsIGhlaWdodDogNH0sXG4gICAgbmF2aWdhdGlvbkJhcjoge3Zpc2libGU6IGZhbHNlLCB4OiA1LCB5OiA2LCB3aWR0aDogNTAsIGhlaWdodDogNjB9XG4gIH07XG5cbiAgZGVzY3JpYmUoJ3BhcnNlV2luZG93cycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHRocm93IGFuIGVycm9yIGlmIHRoZSBzdGF0dXMgYmFyIGluZm8gd2FzblxcJ3QgZm91bmQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBleHBlY3QoKCkgPT4geyBwYXJzZVdpbmRvd3MoJycpOyB9KVxuICAgICAgICAudG8udGhyb3coRXJyb3IsIC9GYWlsZWQgdG8gcGFyc2Ugc3RhdHVzIGJhciBpbmZvcm1hdGlvbi4vKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHRocm93IGFuIGVycm9yIGlmIHRoZSBuYXZpZ2F0aW9uIGJhciBpbmZvIHdhc25cXCd0IGZvdW5kJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbGV0IHdpbmRvd091dHB1dCA9IFtcbiAgICAgICAgJyAgV2luZG93ICMxIFN0YXR1c0JhcicsXG4gICAgICAgICcgICAgYmxhaCBibGFoIGJsYWgnLFxuICAgICAgICAnICAgICAgU3VyZmFjZTogYmxhaCBibGFoIHNob3duPXRydWUgYmxhaCBibGFoIHJlY3Q9KDEuMCwyLjApIDMuMCB4IDQuMCcsXG4gICAgICAgICcgICAgYmxhaCBibGFoIGJsYWgnXG4gICAgICBdLmpvaW4oJ1xcbicpO1xuICAgICAgZXhwZWN0KCgpID0+IHsgcGFyc2VXaW5kb3dzKHdpbmRvd091dHB1dCk7IH0pXG4gICAgICAgIC50by50aHJvdyhFcnJvciwgL0ZhaWxlZCB0byBwYXJzZSBuYXZpZ2F0aW9uIGJhciBpbmZvcm1hdGlvbi4vKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBzdGF0dXMgYW5kIG5hdmlnYXRpb24gYmFyIGluZm8gd2hlbiBib3RoIGFyZSBnaXZlbicsIGFzeW5jICgpID0+IHtcbiAgICAgIHBhcnNlV2luZG93cyh2YWxpZFdpbmRvd091dHB1dCkuc2hvdWxkLmJlLmVxbCh2YWxpZFN5c3RlbUJhcnMpO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoJ2dldFN5c3RlbUJhcnMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBhbiBlcnJvciBpZiB0aGVyZVxcJ3Mgbm8gd2luZG93IG1hbmFnZXIgb3V0cHV0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgZHJpdmVyID0gbmV3IEFuZHJvaWREcml2ZXIoKTtcbiAgICAgIGRyaXZlci5hZGIgPSB7fTtcbiAgICAgIGRyaXZlci5hZGIuc2hlbGwgPSAoKSA9PiB7IHJldHVybiAnJzsgfTtcbiAgICAgIGF3YWl0IGRyaXZlci5nZXRTeXN0ZW1CYXJzKCkuc2hvdWxkLmJlLnJlamVjdGVkV2l0aCgvRGlkIG5vdCBnZXQgd2luZG93IG1hbmFnZXIgb3V0cHV0Li8pO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHRoZSBwYXJzZWQgc3lzdGVtIGJhciBpbmZvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgZHJpdmVyID0gbmV3IEFuZHJvaWREcml2ZXIoKTtcbiAgICAgIGRyaXZlci5hZGIgPSB7fTtcbiAgICAgIGRyaXZlci5hZGIuc2hlbGwgPSAoKSA9PiB7IHJldHVybiB2YWxpZFdpbmRvd091dHB1dDsgfTtcbiAgICAgIChhd2FpdCBkcml2ZXIuZ2V0U3lzdGVtQmFycygpKS5zaG91bGQuYmUuZXFsKHZhbGlkU3lzdGVtQmFycyk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwic291cmNlUm9vdCI6Ii4uLy4uLy4uLy4uIn0=
